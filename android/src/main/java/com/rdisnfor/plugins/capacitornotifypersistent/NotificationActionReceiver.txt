package com.rdisnfor.plugins.capacitornotifypersistent;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

import com.getcapacitor.Bridge;
import com.getcapacitor.BridgeActivity;
import com.getcapacitor.JSObject;
import com.getcapacitor.PluginCall;

public class NotificationActionReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        NotifyPersistentVibrationService.stopContinuousVibration();

        String action = intent.getAction();
        Bundle extras = intent.getExtras();

        String pakagerName = context.getPackageName();
        String className = pakagerName.getClass().getSimpleName();

        // Iniciar a MainActivity com a ação e os dados
        Intent mainIntent = new Intent(context, className.getClass());
        mainIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
        mainIntent.setAction(action);



        if (extras != null) {
            Log.d("NotificationAction", "Received action: " + action);
            mainIntent.putExtras(extras);
        }

        context.startActivity(mainIntent);
    }
}